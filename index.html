<html>
<head>
    <title>Dirt</title>
    <link href="https://fonts.cdnfonts.com/css/microsoft-sans-serif" rel="stylesheet">
    <link href="index.css" rel="stylesheet" type="text/css">
    <script src="interactions.js"></script>
    <script src="utils.js"></script>
</head>

<body>
    <span>To play you will need these emoji to render: ğŸª±ğŸŒ±ğŸ’§</span>
    <div class="content">
        <div id="sidewalk" class="window" style="width:205px">
            <div class="window-header">
                <span class="window-title">Sidewalk</span>
                <span class="spacer"></span>
                <button disabled>O</button>
                <button disabled>X</button>
            </div>
            <div class="window-content">
                ğŸª±ğŸª±ğŸª±ğŸŒ±ğŸŒ±ğŸª±
            </div>
        </div>
        <div id="garden" class="window">
            <div class="window-header">
                <span class="window-title">A little garden</span>
                <span class="spacer"></span>
                <button disabled>O</button>
                <button disabled>X</button>
            </div>
            <div class="window-content">
                dirt dirt dirt<br>
                dirt dirt ğŸª±<br>
                dirt dirt dirt
            </div>
        </div>
        <div id="weather" class="window">
            <div class="window-header">
                <span class="window-title">5-Day Weather Forecast</span>
                <span class="spacer"></span>
                <button disabled>O</button>
                <button disabled>X</button>
            </div>
            <div class="window-content">
                <div class="weather-week">
                    <div class="weather-day">
                        <span>48/<strong>54</strong></span>
                        <span>Party cloudy</span>
                        <span>â›…</span>
                        <span class="weather-dow">MON</span>
                    </div>
                    <div class="weather-day">
                        <span>37/<strong>51</strong></span>
                        <span>Mostly sunny</span>
                        <span>ğŸŒ¤ï¸</span>
                        <span class="weather-dow">TUE</span>
                    </div>
                    <div class="weather-day">
                        <span>44/<strong>50</strong></span>
                        <span>PM rain</span>
                        <span>ğŸŒ§ï¸</span>
                        <span class="weather-dow">WED</span>
                    </div>
                    <div class="weather-day">
                        <span>37/<strong>47</strong></span>
                        <span>Chance rain</span>
                        <span>ğŸŒ¦ï¸</span>
                        <span class="weather-dow">THU</span>
                    </div>
                    <div class="weather-day">
                        <span>35/<strong>47</strong></span>
                        <span>Party cloudy</span>
                        <span>â›…</span>
                        <span class="weather-dow">FRI</span>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        const MARGIN = 10;
        const DAYS_OF_WEEK = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];

        (function () {
            let weatherDows = document.getElementsByClassName("weather-dow");
            let currentDow = new Date().getDay();
            for (let day of weatherDows) {
                day.innerHTML = DAYS_OF_WEEK[currentDow];
                currentDow = (currentDow + 1) % 7;
            }

            let currentWindow = undefined;
            let mouseOffset = [0, 0];
            let zIndex = 1;
            const windows = document.getElementsByClassName("window");
            for (let w of windows) {
                w.style.left = 20 + Math.random() * 500;
                w.style.top = 20 + Math.random() * 300;

                const header = w.getElementsByClassName("window-header")[0];
                header.addEventListener('mousedown', (e) => {
                    e.preventDefault()
                    currentWindow = w;
                    mouseOffset[0] = e.offsetX;
                    mouseOffset[1] = e.offsetY;
                    zIndex += 1;
                    currentWindow.style.zIndex = zIndex;
                })
                document.addEventListener('mouseup', (e) => {
                    e.preventDefault();
                    checkInteractions(currentWindow, windows);
                    currentWindow = undefined;
                })
                document.addEventListener('mousemove', (e) => {
                    if (!!currentWindow) {
                        e.preventDefault()
                        currentWindow.style.left = e.clientX - mouseOffset[0];
                        currentWindow.style.top = e.clientY - mouseOffset[1];
                    }
                })
            }
        })();
    </script>
</body>

</html>